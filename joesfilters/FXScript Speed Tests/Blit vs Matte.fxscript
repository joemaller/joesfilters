filter "Blit Opacity Test"group "BETA"input op, "Opacity", slider, 255, 0, 255;input bg, "Background", color, 255, 255, 0, 0;input switch, "choose", RadioGroup, 1, "Matte", "Blit", "Scaled Blit", "BlitRect then Matte";input iterations, "Iterations", slider, 1, 1, 100;codefloat w,h, x;dimensionsOf(dest, w, h);image xbuffer[w][h], xbuffer2[w][h];point box[4], box2[4]channelfill(dest, 255, bg.r, bg.g, bg.b);channelfill(xbuffer2, 0, 0, 0, 0);boundsOf(dest, box); box2 = box; box /=2;  xbuffer = src1; channelCopy(xbuffer, xbuffer, kgreen, kred, kgreen, kblue);for x = 1 to iterationsif switch == 1	matte(xbuffer, dest, dest, op/255, kalpha); else if switch == 2	blit(xbuffer, box2, dest, box2, op/255);else if switch == 3	blit(xbuffer, box2, dest, box, op/255);else if switch == 4	blitRect(xbuffer, box2, xbuffer2, box);	matte(xbuffer2, dest, dest, op/255, kalpha); end ifnext;